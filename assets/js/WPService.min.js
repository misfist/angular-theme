function WPService(e){function t(e,t){document.querySelector("title").innerHTML=o.siteName+" | "+e,o.pageTitle=t}function s(e,t,s){o.posts=e,o.currentPage=t,o.totalPages=s("X-WP-TotalPages")}var o={wpJsonUrl:"wp-json/wp/v2/",siteName:"WP Dev",posts:[],categories:[],pageTitle:"",currentPage:1,totalPages:1};return o.getPosts=function(n){return console.log("WPService.getPosts",o.getPosts),e.get(o.wpJsonUrl+"posts/?page="+n).success(function(e,o,a){console.log("response",e),n=parseInt(n,10),isNaN(n)||n>a("X-WP-TotalPages")?t("Page Not Found","Page Not Found"):(n>1?t("Posts on Page "+n,"Posts on Page "+n+":"):t("Home","Latest Posts:"),s(e,n,a))})},o.getAllCategories=function(){console.log("WPService.getAllCategories called"),o.categories.length||e.get(o.wpJsonUrl+"terms/category/").success(function(e){o.categories=e})},o.getFeaturedImage=function(t){console.log("WPService.getFeaturedImage",o.getFeaturedImage),t&&e.get(o.wpJsonUrl+"media/"+t).success(function(e){console.log(e),o.post.imageUrl=e})},o.getSearchResults=function(n){return e.get(o.wpJsonUrl+"posts/?filter[s]="+n+"&filter[posts_per_page]=-1").success(function(e,o,a){t("Search Results for "+n,"Search Results:"),s(e,1,a)})},o.getPostsInCategory=function(n,a){console.log("WPService.getPostsInCategory called"),a=a?parseInt(a,10):1,t("Category: "+n.name,"Category: "+n.name+" - Page: "+a);var r=o.wpJsonUrl+"posts/?filter[category_name]="+n.name;return a&&(r+="&page="+a),e.get(r).success(function(e,t,o){s(e,a,o)})},o}app.factory("WPService",["$http",WPService]);