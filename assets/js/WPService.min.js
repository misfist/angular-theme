function WPService(e,t){function o(e,t){document.querySelector("title").innerHTML=s.siteName+" | "+e,s.pageTitle=t}function r(e,t,o){s.posts=e,s.currentPage=t,s.totalPages=o("X-WP-TotalPages")}var s={wpJsonUrl:"wp-json/wp/v2/",siteName:"WP Dev",posts:[],images:[],categories:[],pageTitle:"",totalItems:"",currentPage:1,totalPages:1};return s.getPosts=function(t){return e.get(s.wpJsonUrl+"posts/?page="+t).success(function(e,s,n){t=parseInt(t,10),isNaN(t)||t>n("X-WP-TotalPages")?o("Page Not Found","Page Not Found"):(t>1?o("Posts on Page "+t,"Posts on Page "+t+":"):o("Home","Latest Posts:"),r(e,t,n))}).error(function(e){console.error("Couldn't get posts in WPService.getPosts")})},s.getImageCollection=function(){console.log("WPService.getImageCollection called"),e.get(s.wpJsonUrl+"posts").success(function(e){_.each(e,function(e,t){e.featured_image_thumbnail_full_url&&s.images.push({url:e.featured_image_thumbnail_full_url,title:e.featured_image_thumbnail_title})})}).error(function(e){console.error("Couldn't get images in WPService.getImageCollection")})},s.getAllCategories=function(){s.categories.length||e.get(s.wpJsonUrl+"terms/category/").success(function(e){s.categories=e}).error(function(e){console.error("Couldn't get categories in WPService.getAllCategories")})},s.getSearchResults=function(t){return e.get(s.wpJsonUrl+"posts/?filter[s]="+t+"&filter[posts_per_page]=-1").success(function(e,s,n){o("Search Results for "+t,"Search Results:"),r(e,1,n)}).error(function(e){console.error("Couldn't get results in WPService.getSearchResults")})},s.getPostsInCategory=function(t,n){n=n?parseInt(n,10):1,o("Category: "+t.name,"Category: "+t.name+" - Page: "+n);var a=s.wpJsonUrl+"posts/?filter[category_name]="+t.name;return n&&(a+="&page="+n),e.get(a).success(function(e,t,o){r(e,n,o)}).error(function(e){console.error("Couldn't get response in WPService.getPostsInCategory")})},s}app.factory("WPService",["$http",WPService]);